(function(v,A,j){var z=v.index;var C=z[v.idxIng];var a=C[v.ieDis];var h=a[v.objDisjQr];var I=C[v.ieLst];var g=C[v.ieSiz];var D=C[v.iePot];var H=z[v.idxEff];var G=H[v.ieDis];var N=G[v.objDisjQr];var O=H[v.ieSiz];var u=H[v.ieLst];var o=H[v.iePot];var n=z[v.idxPot];var E=n[v.idxPotDis];var m=E[v.objDisjQr];var F=n[v.idxPotEff];var r=n[v.idxPotLst];var e=n[v.idxPotNat];var y=n[v.idxPotIng];var M=y[2];var L=y[3];var B={idx:C,disjQr:a[v.objDisjQr],next:a[v.objDisNxt],prev:a[v.objDisPrv],sel:a[v.objDisSel],header:"Ingredients",countSel:"#ingCount",countTag:"tag-primary",countDis:null,listSel:"#ingredients",selector:"p.tIngs",fpSelect:l,filter:null,menuClick:P,menuSel:".selIng"};var k={idx:H,disjQr:G[v.objDisjQr],next:G[v.objDisNxt],prev:G[v.objDisPrv],sel:G[v.objDisSel],header:"Effects",countSel:"#effCount",countTag:"tag-success",countDis:null,listSel:"#effects",selector:"p.tEffs",fpSelect:l,filter:null,menuClick:b,menuSel:".selEff"};var f={idx:n,disjQr:E[v.objDisjQr],header:"Potions",countSel:"#potCount",countTag:"tag-info",countDis:null,selector:"p.tPots",listSel:"#potions",fpSelect:null,filter:null,menuClick:x,menuSel:".purEff"};function q(V,X){var Q=X[v.objPotIng];var T=X[v.objPotEff];var U=I[Q[0]][v.objIngNam];var S=u[T[0]][v.objEffNam];for(var R=1;R<Q.length;R++){U+=", "+I[Q[R]][v.objIngNam]}for(var W=1;W<T.length;W++){S+=", "+u[T[W]][v.objEffNam]}V.children(".potIngs").text(U);V.children(".potEffs").text(S)}function s(T){var R="";var Q=T?T.length:0;if(Q>v.maxPotDis){Q=v.maxPotDis;f.trunc.show()}else{f.trunc.hide()}for(var U=0;U<Q;U++){var S=m[U];q(S,r[T[U]]);S.show()}for(var U=Q;U<v.maxPotDis;U++){m[U].hide()}}function i(S,T,Q,U){for(var R=0;R<Q;R++){if(T[R]){S=v.intersect(S,U[R])}}return S}function t(){var Q=null;Q=i(Q,B.sel,g,D);Q=i(Q,k.sel,O,o);Q=v.intersect(Q,k.filter);Q=v.intersect(Q,B.filter);Q=v.intersect(Q,f.filter);return Q}function K(Q,U,S,V,W){var T=0;for(var R=0;R<Q;R++){if(S[R]){++T;if(!U[R]){W[R].slideDown("slow")}}else{if(U[R]){if(V[R]){W[R].next().slideUp("slow")}W[R].slideUp("slow")}}}return T}function d(R){var Q=B.next;var Z=k.next;var S=C[v.ieSiz];var T=H[v.ieSiz];var Y,aa,X,V;if(R===null){for(Y=0;Y<S;Y++){Q[Y]=true}for(aa=0;aa<T;aa++){Z[aa]=true}return}for(Y=0;Y<S;Y++){Q[Y]=false}for(aa=0;aa<T;aa++){Z[aa]=false}var W=R.length;for(Y=0;Y<W;Y++){var ac=r[R[Y]];var ab=ac[v.objPotIng];var U=ac[v.objPotEff];for(X=0,V=ab.length;X<V;X++){Q[ab[X]]=true}for(X=0,V=U.length;X<V;X++){Z[U[X]]=true}}}var w=function(){var R=B.next;var Q=k.next;for(var S=0;S<g;S++){R[S]=true;if(B.sel[S]){B.sel[S]=false;h[S].next().slideUp("slow");h[S].removeClass("tag-primary")}}for(var T=0;T<O;T++){Q[T]=true;if(k.sel[T]){k.sel[T]=false;N[T].next().slideUp("slow");N[T].removeClass("tag-success")}}B.filter=null;k.filter=null;f.filter=null;c(true)};var J=function(Q){var R=Q.prev;Q.prev=Q.next;Q.next=R};var c=function(U){;var T=U?null:t();s(T);d(T,C,H);var R=K(g,B.prev,B.next,B.sel,h);var S=K(O,k.prev,k.next,k.sel,N);J(B);J(k);var Q=T?T.length:0;B.countDis.text(R?R:"-");k.countDis.text(S?S:"-");f.countDis.text(Q?Q:"-");return(true)};function l(T,S){console.log("clicking...");console.log(S);var U=S.sel;var R=S.countTag;var Q=T.data("idx");if(U[Q]){U[Q]=false;T.next().slideUp("slow");T.removeClass(R)}else{U[Q]=true;T.addClass(R);T.next().slideDown("slow")}c(false);return(false)}function P(Q,R){if(Q.startsWith("Two")){R.filter=M}else{if(Q.startsWith("Three")){R.filter=L}else{R.filter=null}}return(c(false))}function b(Q,R){if(Q.startsWith("One")){R.filter=F[1]}else{if(Q.startsWith("Two")){R.filter=F[2]}else{if(Q.startsWith("Three")){R.filter=F[3]}else{if(Q.startsWith("Four")){R.filter=F[4]}else{if(Q.startsWith("Five")){R.filter=F[5]}else{R.filter=null}}}}}return(c(false))}function x(Q,R){if(Q.startsWith("Only Positive")){R.filter=e[v.objEffNatPos]}else{if(Q.startsWith("Only Negative")){R.filter=e[v.objEffNatNeg]}else{v.filter=null}}return(c(false))}var p=function(Q){Q.countDis=A(Q.countSel);A(Q.menuSel).click(function(){Q.menuClick(A(this).text(),Q)});A(Q.selector).each(function(){var R=A(this);Q.disjQr[R.data("idx")]=R;R.click(function(){console.log("click");Q.fpSelect?Q.fpSelect(R,Q):console.log(this)})})};v.runSpotRun=function(){p(B);p(k);p(f);f.trunc=A(".trunc");A("#reset").click(function(){w()})}}(window.sns=window.sns||{},jQuery));